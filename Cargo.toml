# WARNING: ./scripts/commit-public-repo-update.sh overwrites this file before
# pushing commits to the public github repo. `workspace.dependencies` should
# be manually curated there to reflect the dependencies for the _public_ crates
# only.
[workspace]
resolver = "2"
members = [
    "proxy-test",
    "qcs-api-client-common",
    "qcs-api-client-common-internal",
    "qcs-api-client-grpc",
    "qcs-api-client-grpc-internal",
    "qcs-api-client-openapi/internal",
    "qcs-api-client-openapi/public",
]

[workspace.dependencies]
# jsonwebtoken should always be validated after upgrading. Changes to the validation logic can cause the client to
# believe JWTs are always invalid, which causes the client to refresh them before every request. See #83.
jsonwebtoken = "9.3.0"
opentelemetry = "0.20.0"
opentelemetry_api = "0.20.0"
opentelemetry_sdk = "0.20.0"
opentelemetry-http = "0.9.0"
reqwest = {version = "0.11.27", default-features = false, features = ["json", "rustls-tls-native-roots"]}
reqwest-middleware = "0.2.0"
reqwest-tracing = { version = "0.4.6", features = ["opentelemetry_0_20"] }
tracing-opentelemetry = "0.20.0"
tracing-subscriber = "0.3.17"

[patch.crates-io]
# `hyper-proxy` is unmaintained, and depends on an outdated version of `rustls`.
# Following https://gitlab.com/rigetti/qcs/clients/qcs-api-client-rust/-/merge_requests/118,
# we should migrate to hyper-proxy2.
hyper-proxy = { git = "https://github.com/rigetti/hyper-proxy" }
